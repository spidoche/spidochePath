function SpidochePath(i){"use strict";this.isCanvasSupported&&(this.settings=i||{},this.canvas=this.settings.id||{},this.paths=this.settings.paths||{},this.canvas_bg="#333",this.stroke_color="#ffffff",this.cercle_color="#ffffff",this.fill_color=this.settings.fill_color||"#ffffff",this.fill_color_rgb="",this.cercle_radius=3,this.min_dist_fill=80,this.min_dist_anim=35,this.show_line=!0,this.show_point=!0,this.fill=!0,this.initRatio=1,this.is_morph=!1,this.morph_path=null,this.ctx=this.canvas.getContext("2d"),this.initWidth=this.canvas.width,this.mouse={},this.click={},this.init())}SpidochePath.prototype={init:function(){this.canvas.style.backgroundColor=this.canvas_bg,this.hdpi_canvas(this.canvas,this.ctx),this.mouse.x=0,this.mouse.y=0;for(var i=this.paths,t=0;t<i.length;t++)for(var s=i[t],e=0;e<i[t].length;e++)s[e].x_orginal=s[e].x,s[e].y_orginal=s[e].y;this.event_handler(),this.draw(),this.animate()},draw:function(){for(var i=this.ctx,t=this.paths,s=this.mouse,e=this.morph_path,n=0;n<t.length;n++){var a=t[n];if(this.opacity=0,this.is_morph)var h=e[n];i.beginPath(),i.moveTo(a[0].x,a[0].y);for(var o=0;o<t[n].length;o++)i.lineTo(a[o].x,a[o].y),this.is_near(a[o],this.min_dist_fill,s)&&(this.opacity+=.1),this.is_morph&&(this.animateTo(a[o],h[o].x,h[o].y),a[o].x_orginal=h[o].x,a[o].y_orginal=h[o].y),this.is_near(a[o],this.min_dist_anim,s)?(this.animateTo(a[o],s.x,s.y),a[o].move=1):1===a[o].move&&(this.animateTo(a[o],a[o].x_orginal,a[o].y_orginal),a[o].move=0);this.show_line&&(i.lineTo(a[0].x,a[0].y),i.strokeStyle=this.stroke_color,i.stroke()),this.fill&&(this.fill_color_rgb=this.hex2rgb(this.fill_color),i.fillStyle="rgba("+this.fill_color_rgb+","+this.opacity+")",i.fill()),i.closePath()}if(this.show_point)for(var r=0;r<t.length;r++)for(var l=t[r],c=0;c<t[r].length;c++)i.beginPath(),i.arc(l[c].x,l[c].y,this.cercle_radius,0,2*Math.PI),i.fillStyle=this.cercle_color,i.fill(),i.closePath();this.is_morph&&(this.is_morph=!1)},animate:function(){stats.begin();var i=this.canvas,t=this.canvas.getContext("2d");t.clearRect(0,0,i.width,i.height),this.draw(),stats.end(),requestAnimationFrame(this.animate.bind(this))},event_handler:function(){var i=this,t=this.canvas,s=1;this.initWidth>window.innerWidth&&(s=t.width/this.initRatio/this.initWidth),t.addEventListener("mousemove",function(e){i.mouse.x=(e.clientX-t.getBoundingClientRect().left)/s,i.mouse.y=(e.clientY-t.getBoundingClientRect().top)/s}),window.addEventListener("resize",function(){})},isCanvasSupported:function(){var i=document.createElement("canvas");return!(!i.getContext||!i.getContext("2d"))},animateTo:function(i,t,s){TweenLite.to(i,2,{x:t,y:s,ease:Elastic.easeOut.config(1,.3)})},morph:function(i){this.is_morph=!0,this.morph_path=i},get_random:function(i,t){return Math.random()*(t-i)+i},is_near:function(i,t){var s=i.x_orginal-t,e=i.y_orginal-t,n=i.x_orginal+t,a=i.y_orginal+t,h=this.mouse.x,o=this.mouse.y;return h>s&&n>h&&o>e&&a>o},x_y_getter:function(){var i=this.canvas,t=this.ctx,s="";i.addEventListener("click",function(i){s+="{x: "+i.clientX+", y: "+i.clientY+"},",console.log(s),console.log(t.currentTransform)},!1)},get_ratio:function(i,t){var s=window.devicePixelRatio||1,e=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,n=s/e,a=i,h=a.width/a.height,o=this.initWidth;if(this.initRatio=n,o>window.innerWidth&&(a.width=window.innerWidth,a.height=a.width/h),s!==e){var r=a.width,l=a.height;return a.width=r*n,a.height=l*n,a.style.width=r+"px",a.style.height=l+"px",o>window.innerWidth&&(n=a.width/o),n}},hdpi_canvas:function(){var i=this.canvas,t=this.ctx,s=this.get_ratio(i,t);t.scale(s,s)},hex2rgb:function(i,t){var s=i.replace("#","");s=s.match(new RegExp("(.{"+s.length/3+"})","g"));for(var e=0;e<s.length;e++)s[e]=parseInt(1==s[e].length?s[e]+s[e]:s[e],16);return s.join(",")}};